---
title: 算法思路总结
tags:

categories:
  - 练习笔记
toc: true
date: 2023-06-15 14:16:02
---

# ST表
ST表（Sparse Table，稀疏表）是一种数据结构，采用了倍增的思想，在`O(nlogn)`时间构造一个二维表，可以在`O(1)`时间查询`[l,r]`区间的最值。主要用于解决RMQ（Range Minimum/Maximum Query，区间最值查询）问题。

实现思路：
* 设`F[i,j]`表示`[i,i+2^j-1]`区间的最值，区间长度为`2^j`
* 根据倍增思想，长度为`2^j`的区间能分成两个长度为`2^(j-1)`的区间，然后分别求两个区间的最值。递推公式：`F[i,j]=max(F[i,j-1],F[i+2^(j-1),j-1])`

java代码如下：
```java
// 构建ST表
int[] lg = new int[n + 1];// 预处理：以2为底的对数，向下取整
for (int i = 2; i <= n; ++i) {
    lg[i] = lg[i >> 1] + 1;
}
System.out.println(Arrays.toString(lg));

// f[i][j] 表示 [i - 2^j + 1, i] 区间的最大值
int[][] f = new int[n][lg[n] + 1];
for (int i = 0; i < n; ++i) {
    f[i][0] = chargeTimes[i];
    for (int j = 1; j <= lg[i + 1]; ++j) {
        f[i][j] = Math.max(f[i][j - 1], f[i - (1 << j - 1)][j - 1]);
    }
}
for (int[] tmp : f) {
    System.out.printf(Arrays.toString(tmp));
}
```